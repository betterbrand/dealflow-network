# Development Dockerfile for DealFlow Network
# This provides a containerized development environment with hot module reloading

FROM node:20-alpine

# Enable pnpm
RUN corepack enable

WORKDIR /app

# Copy dependency files
COPY package.json pnpm-lock.yaml ./

# Copy patches directory (required for pnpm patched dependencies)
COPY patches ./patches

# Install all dependencies (including dev dependencies)
RUN pnpm install --frozen-lockfile

# Source code will be mounted as volumes in docker-compose.yml
# This allows for hot reloading during development

# Expose application port
EXPOSE 3000

# Start development server
# tsx watch for server + Vite HMR for client
CMD ["npm", "run", "dev"]
